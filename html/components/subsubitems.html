{% for k in items %}
<a
        id="item-sub2-{{ parent_id }}-{{ k.safe_id }}"
        class="d-flex justify-content-between align-items-center list-group-item list-group-item-action fade-in{% if k.copy_count < minimum_copies %} list-group-item-warning{% endif %}"
        data-bs-toggle="list"
        href="#"
        role="tab"
        hx-post="/components/infopanel.html"
        hx-ext="json-enc"
        hx-include="#item-sub2-{{ parent_id }}-{{ k.safe_id }} input"
        hx-target="#info-panel"
>
    <div class="d-flex align-items-center">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="me-3 text-secondary">
            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
        </svg>
        <span>{{ k.name }}</span>
    </div>
    <span class="badge text-bg-primary rounded-pill">{{ k.items | length }}</span>
    <input type="hidden" name="item_path" value="">
    <input type="hidden" name="item_path" value="{{ parent_path | split(pat="/") | first }}">
    <input type="hidden" name="item_path" value="{{ parent_path }}">
    <input type="hidden" name="item_path" value="{{ k.id }}">
</a>
{% endfor %}

<script>
// Set up event delegation for dynamically loaded sub2 items
document.addEventListener('click', function(event) {
    const target = event.target.closest('a[id^="item-sub2-"]');
    if (target && target.getAttribute('data-bs-toggle') === 'list') {
        event.preventDefault();
        
        // Update URL with selected element ID
        if (typeof updateUrlWithSelection === 'function') {
            updateUrlWithSelection(target.id);
        }
    }
});
</script>